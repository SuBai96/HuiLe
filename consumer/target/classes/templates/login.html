<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>小米账号-登录</title>
    <link rel="icon" type="image/x-icon" href="http://182.92.194.216:2202/GJStatic/img/favicon.ico"/>
    <link rel="stylesheet" href="http://182.92.194.216:2202/GJStatic/layui/css/layui.css">
    <script src="http://182.92.194.216:2202//GJStatic/js/jquery-1.8.3.min.js"></script>
    <script src="http://182.92.194.216:2202/GJStatic/layui/layui.all.js"></script>

    <style>
        * {
            margin: 0px;
            padding: 0px;
        }

        a {
            text-decoration: none;
        }

        fieldset {
            display: inline-block;
            width: 340px;
            margin-top: 70px;
            color: #999;
            border: none;
            border-top: 1px solid #999;
            text-align: center;
            font-size: 13px;
            margin-left: 33px;
        }

        .zong {
            width: 100%;
            height: 100%;
        }

        .top {
            padding-top: 10px;
            padding-left: 100px;
            /* width: 100%;
             height: 100px;
             background-image: url(http://182.92.194.216:2202/GJStatic/img/logo.png);
             background-repeat: no-repeat;
             background-position: 110px;*/
        }

        .banner {
            width: 100%;
            height: 588px;
           /* background: url(http://182.92.194.216:2202/GJStatic/img/CC9.jpg) no-repeat center;*/
            /*cursor:pointer;*/
        }

        .banner_box {
            height: 500px;
            width: 400px;
            background: white;
            position: absolute;
            right: 70px;
            margin-top: -520px;
        }

        .banner_box input {
            height: 50px;
            width: 360px;
            margin-top: 30px;
            margin-left: 20px;
            font-size: 15px;
        }

        .dl {
            display: inline-block;
            margin-top: 30px;
            margin: auto;
            margin-left: 80px;
            font-size: 22px;
            color: #f56600;
            margin-right: 15px;
            font-family: "微软雅黑";
        }

        .sm {
            display: inline-block;
            margin-top: 30px;
            font-size: 22px;
            margin-left: 15px;
            color: black;
            font-family: "微软雅黑";

        }

        .z_zc {
            font-size: 11px;
            float: right;
            margin-top: 10px;
            margin-right: 18px;
        }

        .y_zc {
            font-size: 11px;
            float: left;
            margin-top: 10px;
            margin-left: 18px;
        }

        .img_t {
            margin-left: 20px;
            cursor: pointer;
            margin-top: 10px;
        }

        .img_tc {
            cursor: pointer;
            margin-left: 80px;
            margin-top: 10px;
        }

        .img {
            height: 30px;
            width: 400px;
            margin: 30px auto;
            position: absolute;
            bottom: 13px;
        }

        .zhdl {
            visibility: visible;
        }

        .smdl {
            visibility: hidden;
            position: absolute;
            top: 290px;
            right: 117px;
        }

        .smdl p {
            font-size: 15px;
            text-align: center;
        }

        .footer {
            width: 100%;
            height: 170px;
            background-color: white;
            color: #757575;
            /*font-weight:bold;*/
            font-size: 14px;
        }

        .footer p {
            padding-top: 30px;
            text-align: center;
            color: #757575;
            /* color: #F56600;*/
        }

        .footer li {
            float: left;
            list-style: none;
            margin-left: 30px;
            font-size: 14px;
        }

        .footer .li {
            margin-left: 37%;
            font-size: 14px;
        }

        .footer ul {
            padding-top: 90px;
        }

        .footer a {
            color: #757575;
        }
    </style>
    <script type="text/javascript">
        $(function () {
            $("#mobilelogin2").hide();
        })
    </script>
</head>
<body>
<!--页面大容器-->
<div class="zong">
    <!--页面头部部分-->
    <div class="top">
        <a href="https://www.mi.com/micc9/"><img src="http://182.92.194.216:2202/GJStatic/img/logo.png"></a>
    </div>
    <!--页面中部部分-->
    <div class="banner"  >
        <a href="index.html"><img src="http://182.92.194.216:2202/GJStatic/img/CC92.jpg"  width="100%" height="588px" style="cursor:pointer;"></a>
        <div class="banner_box">
            <a href="#" class="dl" id="zh" onclick="dl()">账号登录</a>
            <span style="color: #e0e0e0">|</span>
            <a href="#" class="sm" id="sm" onclick="sm()">扫码登陆</a>
            <div class="zhdl" id="zhdl">
               <span id="mobilelogin">
                <form method="post">
                    <input type="text" placeholder="买来乐ID/手机号码" id="username"/>
                    <input type="password" placeholder="请输入密码" id="password"/>
                    <input onmouseover="this.style.cursor='pointer'"
                           style="background-color: #F56600; border: none; color: white;" type="button" value="登录"
                           id="sub">
                </form>
                </span>

                <span id="mobilelogin2">
                    <form method="post">
                    <input type="text" placeholder="手机号码" id="mobile" onblur="checkMobile()"/>
                    <input type="text" placeholder="短信验证码" id="verifyCode" onblur="checkVerifyCode()"/>
                        <input type="button" id="getVerifyCode"
                               class="layui-btn layui-btn-radius layui-btn-primary" value="获取短信验证码"/>
                    <input onmouseover="this.style.cursor='pointer'"
                           style="background-color: #F56600; border: none; color: white;" type="button" value="立即登录/注册"
                           id="subORreg">
                </form>
                </span>

                <span class="y_zc">
		        <a href="javascript:void(0)" style="color: #f56600;" id="loginORregister">手机短信登陆/注册</a>
				</span>
                <span class="z_zc">
		        <a href="register.html" style="color: black;">立即注册</a>
		        <span>|</span>
					<a href="ResetPwd.html" style="color: black;">忘记密码?</a>
                </span>
                <form>
                    <fieldset>
                        <legend>其他方式登录</legend>
                    </fieldset>
                </form>

                <div class="img">
                    <a href="https://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=code&client_id=100284651&redirect_uri=https://account.xiaomi.com/pass/sns/login/load&state=STATE_770218"
                       target="_blank"><img class="img_tc" src="http://182.92.194.216:2202/GJStatic/img/QQ.jpg"
                                            width="40px" height="35px" title="QQ登录"
                                            alt="Cinque Terre"/></a>
                    <a href="https://api.weibo.com/oauth2/authorize?response_type=code&client_id=2996826273&redirect_uri=https://account.xiaomi.com/pass/sns/login/load&state=STATE_637433"
                       target="_blank"><img class="img_t" src="http://182.92.194.216:2202/GJStatic/img/weibo.jpg"
                                            width="40px" height="35px" title="新浪登录"
                                            alt="Cinque Terre"/></a>
                    <a href="https://auth.alipay.com/login/express.htm?goto=https%3A%2F%2Fmemberexprod.alipay.com%3A443%2Fauthorize%2FuserAuthQuickLoginAction.htm%3Fe_i_i_d%3D43922744754ef4bf97f1f6bb70b6455f"
                       target="_blank"><img class="img_t" src="http://182.92.194.216:2202/GJStatic/img/zhifubao.jpg"
                                            width="40px" height="35px" title="支付宝登录"
                                            alt="Cinque Terre"/></a>
                    <a href="https://open.weixin.qq.com/connect/qrconnect?appid=wxa21de3acc0d5e79b&redirect_uri=https%3A%2F%2Faccount.xiaomi.com%2Fpass%2Fsns%2Flogin%2Fload&response_type=code&scope=snsapi_login&state=STATE_840200#wechat_redirect"
                       target="_blank"><img class="img_t" src="http://182.92.194.216:2202/GJStatic/img/weixin.jpg"
                                            width="40px" height="35px" title="微信登录"
                                            alt="Cinque Terre"/></a>
                </div>

            </div>
        </div>
    </div>
    <div class="smdl" id="smdl">
        <img style="margin-left: 63px;" src="http://182.92.194.216:2202/GJStatic/img/logo2wm.png"/>
        <p>使用<span style="color:#f56600 ;">小米商城APP</span>扫一扫</p>
        <p>小米手机可打开&lceil;设置&rfloor;&nbsp;&gt;&nbsp;&lceil;小米账号&rfloor;&nbsp;扫码登陆</p>
    </div>
</div>
<!--页面底部部分-->
<div class="footer">
    <ul>
        <li class="li">
            <a href="#">简体</a>
        </li>
        <li>|</li>
        <li>
            <a href="#">繁体</a>
        </li>
        <li>|</li>
        <li>
            <a href="#">英语</a>
        </li>
        <li>|</li>
        <li>
            <a href="#">常见问题</a>
        </li>
    </ul>
    <p class="nf-intro">小米公司版权所有-京ICP备10046444-<a class="beian-record-link" target="_blank"
                                                  href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020134"><span><img
            src="http://182.92.194.216:2202/GJStatic/img/ghs.png"></span>京公网安备11010802020134号</a>-京ICP证110507号</p>
</div>


</body>
<script type="text/javascript">
    var code = 123456;
    var smc = document.getElementById("sm");
    var dld = document.getElementById("zh");
    var dljm = document.getElementById("zhdl");
    var smdl = document.getElementById("smdl");


    function sm() {
        smc.style.color = "#f56600";
        dld.style.color = "black";
        dljm.style.visibility = "hidden";
        smdl.style.visibility = "visible";
    }

    function dl() {
        smc.style.color = "black";
        dld.style.color = "#f56600";
        dljm.style.visibility = "visible";
        smdl.style.visibility = "hidden";
    }


    $(".y_zc").toggle(function () {
        $("#mobilelogin2").show();
        $("#mobilelogin").hide();
    }, function () {
        $("#mobilelogin2").hide();
        $("#mobilelogin").show();
    });

    //验证手机号码
    function checkMobile() {
        var reg = /^1[3456789]\d{9}$/;
        var mobile = $("#mobile");
        if (mobile.val() == "") {
            //mobile.focus();
            layer.msg("请输入手机号码");
            return false;
        } else if (!reg.test(mobile.val())) {
            mobile.focus();
            layer.msg("手机号码有误");
            return false;
        }
        return true;
    }

    //验证验证码
    function checkVerifyCode() {
        var verifyCode = $("#verifyCode");
        var mobile = $("#mobile");
        if (verifyCode.val() == "") {
            //verifyCode.focus();
            layer.msg("请输入验证码");
            return false;
        } else if (verifyCode.val().length != 6) {
            //verifyCode.focus();
            layer.msg("请输入6位数的验证码");
            return false;
        }
        else if (verifyCode.val() != code) {
            verifyCode.focus();
            layer.msg("验证码输入错误");
            return false;
        }
        return true;
    }

    var time1 = 5;
    var miao;

    function time() {
        $("#getVerifyCode").addClass("layui-btn layui-btn-radius layui-btn-disabled");
        $("#getVerifyCode").val("重新发送(" + time1 + ")");
        miao = setInterval(function () {
            time1 = time1 - 1;
            if (time1 >= 0) {
                $("#getVerifyCode").val("重新发送(" + time1 + ")");
            } else {
                time1 = 5;
                $("#getVerifyCode").removeClass("layui-btn layui-btn-radius layui-btn-disabled");
                $("#getVerifyCode").addClass("layui-btn layui-btn-radius layui-btn-primary");
                $("#getVerifyCode").val("获取验证码");
                clearInterval(miao);
            }
        }, 1000)
    }

    //验证码发送
    $("#getVerifyCode").click(function () {
        if (checkMobile()) {
            var reg = /^1[3456789]\d{9}$/;
            var verifyCode = $("#verifyCode");
            var mobile = $("#mobile");
            if (reg.test(mobile.val())) {
                var ii = layer.load();
                //此处用setTimeout演示ajax的回调
                setTimeout(function () {
                    layer.close(ii);
                    time();
                    $.ajax({
                        url: '/User/getVerification2/' + mobile.val(),
                        type: 'post',
                        success: function (data) {
                            code = data;
                            layer.msg("验证码" + data);
                        },
                        error: function () {
                            layer.msg('请求出错,请联系管理员');
                        }
                    });
                }, 1000);
            }
        }
        return false;
    });
    $('#sub').on('click', function () {
        var username = $("#username").val();
        var password = $("#password").val();
        if (username != '' && password != '') {
            $.ajax({
                url: '/login/User/' + username + '/' + password,
                type: 'post',
                success: function (data) {
                    if (data.flag == true) {
                        var ii = layer.load();
                        //此处用setTimeout演示ajax的回调
                        setTimeout(function () {
                            layer.close(ii);
                            window.location.href = 'http://127.0.0.1:81/index.html';
                        }, 1000);
                    }
                    else {
                        layer.msg(data.mess);
                    }
                },
                error: function () {
                    layer.msg('请求出错,请联系管理员');
                }
            })
        } else {
            layer.msg('请输入账号或者密码');
        }
    });
    $('#subORreg').on('click', function () {
        var mobile = $("#mobile").val();
        var verifyCode = $("#verifyCode").val();
        if (checkMobile() && checkVerifyCode()) {
            $.ajax({
                url:'/User/ByMobileLoginOrReg/'+mobile,
                type:'post',
                success:function (data) {
                    if (data.flag == true) {
                        var ii = layer.load();
                        //此处用setTimeout演示ajax的回调
                        setTimeout(function () {
                            layer.close(ii);
                            window.location.href = 'http://127.0.0.1:81/index.html';
                        }, 1000);
                    }
                    else {
                        layer.msg(data.mess);
                    }
                },
                error:function () {
                    layer.msg('请求出错,请联系管理员');
                }
            });
        }
    });
</script>
</html>